\documentclass[oneside]{book}
\usepackage[margin=3cm]{geometry}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[italian]{babel}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{xcolor}




% Configurazione SQL
\lstdefinestyle{sqlstyle}{
    language=SQL,
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue}\bfseries,
    commentstyle=\color{green!60!black},
    stringstyle=\color{red},
    numberstyle=\tiny\color{gray},
    numbers=left,
    numbersep=5pt,
    frame=single,
    breaklines=true,
    breakatwhitespace=true,
    tabsize=2,
    showspaces=false,
    showstringspaces=false,
    captionpos=b
}

\lstset{style=sqlstyle}

% Configurazione per caratteri accentati
\lstset{
    literate={à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
             {À}{{\`A}}1 {È}{{\`E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
             {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
             {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
}

% STEP 1: include the package
\usepackage{uninafrontespizio}

% STEP 2: Front-page configuration
\Universita{Università degli Studi di Napoli Federico II}
\Facolta{Scuola Politecnica e delle Scienze di Base}
\Dipartimento{Dipartimento di Ingegneria Elettrica e Tecnologie dell'Informazione}
\CorsoDiLaurea{Corso di Laurea Triennale in Informatica}
% \Materia{Tesi di Laurea in Hacky Typesetting} % optional
\AnnoAccademico{Anno Accademico 2024--2025}
\Titolo{UninaFoodLab Database}

\Logo{logo-federico-II.pdf} %path to logo image
\LogoWidth{3.5cm} %optional, default: 3cm
\LogoPosition{below-uni} % or top, or below-title, or above-title, or no-logo

\begin{document}
    % STEP 3: use \makefrontpage and/or \makefrontpagealt
    \pagestyle{empty}
    \makefrontpage%
    % \makefrontpagealt
    \pagestyle{plain}
    \tableofcontents

    \chapter{Descrizione del progetto}
    \section{Descrizione sintetica del problema}
    Si vuole realizzare una base di dati relazionale per la gestione di corsi di cucina tematici.
    Gli chef possono registrare corsi su specifici argomenti, specificando una data di inizio e
    una frequenza delle sessioni. Ogni corso è articolato in più sessioni,
    che possono essere di due tipi: online, oppure in presenza, in cui gli utenti svolgono attività pratiche.
    Gli utenti possono iscriversi a più corsi e, nel caso delle sessioni pratiche, devono fornire una adesione
    esplicita per confermare la loro partecipazione. Ogni sessione pratica prevede la preparazione di una o
    più ricette, ciascuna delle quali richiede una specifica lista di ingredienti. Le adesioni vengono utilizzate
    per pianificare correttamente la quantità di ingredienti necessari, evitando così sprechi alimentari. 
    Il sistema prevede la possibilità di notificare gli utenti iscritti ad
    un corso in caso di variazioni di programma.
    
    \chapter{Progettazione Concettuale}
    \section{Introduzione}
    Una volta definito e analizzato il problema possiamo procedere con la progettazione concettuale della base di dati. In questa fase, 
    l'obiettivo è quello di creare un modello concettuale che rappresenti le entità, le relazioni e le caratteristiche del dominio. Tale schema viene
    rappresentato mediante un diagramma delle classi UML e un diagramma Entità-Relazioni (ER).    
    \section{Diagrammi UML e ER}
    \begin{figure}[h]
        \centering
        \includegraphics[width=\textwidth]{../Diagramma UML/UML.png}
        \caption{Diagramma delle classi UML}
        \label{fig:uml}
    \end{figure}
    \begin{figure}[h]
        \centering
        \includegraphics[width=\textwidth]{../Diagramma ER/ER.png}
        \caption{Diagramma Entità-Relazioni}
        \label{fig:er}
    \end{figure}
    \section{Ristrutturazione del modello concettuale}
    Un'operazione fondamentale per il passaggio dal modello concettuale a quello logico è la ristrutturazione. Questo processo 
    implica la trasformazione delle entità e delle relazioni del modello concettuale, al fine di renderne più agevole l'implementazione 
    in un database relazionale. Durante questa fase, si identificano le chiavi primarie e le chiavi esterne, si rimuovono gli attributi multipli
    e le gerarchie di specializzazione, si normalizzano le tabelle per ridurre la ridondanza dei dati.
    \section{Identificazione delle chiavi primarie}
    Le chiavi primarie sono gli attributi che identificano in modo univoco ogni record in una tabella. Nella nostra ristrutturazione
    abbiamo fatto uso di chiavi surrogate, ossia chiavi artificiali create per garantire l'unicità dei record nel caso in cui non esistano 
    chiavi naturali adatte. Queste chiavi non hanno un significato intrinseco, ma sono utilizzate per facilitare le operazioni sulle tabelle.
    \section{Identificazione delle chiavi esterne}
    Le chiavi esterne sono gli attributi che collegano le tabelle tra loro, rappresentando le relazioni tra le entità. Il loro scopo 
    è quello di assicurare che i dati siano coerenti e che le relazioni siano mantenute.
    \section{Rimozione degli attributi multipli}
    Non sono presenti attributi multipli nel modello concettuale.
    \section{Rimozione delle gerarchie di specializzazione}
    Sono presenti due gerarchie di specializzazione:
    \begin{itemize}
        \item 'Persona' si specializza in "Chef" e "Utente"
        \item 'Sessione' si specializza in "Sessione Online" e "Sessione in Presenza"
    \end{itemize}
    \section{Analisi delle ridondanze}
    Non sono presenti ridondanze significative nel modello concettuale.
    \section{Class Diagram ristrutturato}
    \begin{figure}[h]
        \centering
        \includegraphics[width=\textwidth]{../Diagramma UML Ristrutturato/UMLRistrutturato.png}
        \caption{Diagramma UML ristrutturato}
        \label{fig:uml-ristrutturato}
    \end{figure}
    \section{Dizionario delle classi}
    
    \begin{table}[h]
        \centering
        \begin{tabular}{|p{3cm}|p{4cm}|p{8cm}|}
        \hline
        \textbf{Classe} & \textbf{Descrizione} & \textbf{Attributi} \\
        \hline
        Chef & Rappresenta gli chef che insegnano i corsi & Username (string), Nome (string), Cognome (string), Password (string) \\
        \hline
        & & \\
        \hline
        & & \\
        \hline
        & & \\
        \hline
        & & \\
        \hline
        & & \\
        \hline
        & & \\
        \hline
        & & \\
        \hline
        & & \\
        \hline
        & & \\
        \hline
        & & \\
        \hline
        \end{tabular}
    \end{table}
    
    \section{Dizionario delle associazioni}
    \section{Dizionario dei vincoli}
    
    \chapter{Progettazione Logica}
    \section{Schema Logico}
    \textbf{TOPIC}(\underline{IdTopic}, Nome, Descrizione)\\\\
    \textbf{INSEGNA}(\underline{\underline{IdTopic}}, \underline{\underline{UsernameChef}})\\\\
    \textbf{CORSO}(\underline{IdCorso}, Titolo, Frequenza, NumLezioni, DataInizio, \underline{\underline{IdTopic}}, \underline{\underline{UsernameChef}})\\\\
    \textbf{CHEF}(\underline{Username}, Nome, Cognome, Password)\\\\
    \textbf{UTENTE}(\underline{Username}, Nome, Cognome, Password)\\\\
    \textbf{NOTIFICA}(\underline{IdNotifica}, DataInvio, Oggetto, Testo, \underline{\underline{UsernameChef}})\\\\
    \textbf{RICEVE}(\underline{\underline{IdNotifica}}, \underline{\underline{UsernameUtente}})\\\\
    \textbf{ISCRIZIONE}(\underline{\underline{UsernameUtente}}, \underline{\underline{IdCorso}}, DataIscrizione)\\\\
    \textbf{SESSIONE ONLINE}(\underline{IdSessione}, Link, Data, Durata, NumSessione, \underline{\underline{IdCorso}})\\\\
    \textbf{SESSIONE IN PRESENZA}(\underline{IdSessione}, Luogo, Aula, Data, Durata, NumSessione, \underline{\underline{IdCorso}})\\\\
    \textbf{ADESIONE}(\underline{\underline{UsernameUtente}}, \underline{\underline{IdSessionePresenza}})\\\\
    \textbf{RICETTA}(\underline{IdRicetta}, Nome, Descrizione)\\\\
    \textbf{PREPARA}(\underline{\underline{IdSessionePresenza}}, \underline{\underline{IdRicetta}})\\\\
    \textbf{INGREDIENTE}(\underline{IdIngrediente}, Nome, UnitàDiMisura, Allergene)\\\\
    \textbf{COMPOSIZIONE}(\underline{\underline{IdRicetta}}, \underline{\underline{IdIngrediente}}, Quantità)\\\\
    \chapter{Progettazione Fisica}
    La base di dati è stata implementata utilizzando PostgreSQL, un sistema di gestione di basi di dati relazionali open source.
    La progettazione fisica della base di dati è stata effettuata seguendo le linee guida del modello relazionale, 
    definendo le tabelle, le chiavi primarie e le chiavi esterne per garantire l'integrità referenziale tra le entità.
    Qui di seguito sono riportate le definizioni delle tabelle utilizzate nel database ed eventuali triggers, procedures, functions o vincoli implementati.
    \section{Definizione tabelle}
    Seguono le definizioni delle tabelle estratte dallo script di creazione del database.
    \subsection{Definizione della tabella TOPIC}
    \lstinputlisting[caption=Creazione tabella Topic]{../SQL/Tabelle/Topic.sql}
    La tabella \textbf{Topic} rappresenta le categorie tematiche dei corsi di cucina. Ogni topic ha un identificatore univoco generato automaticamente e un nome che deve essere scelto tra i valori predefiniti specificati nel constraint CHECK.\\\\\\\\\\
    \subsection{Definizione della tabella CHEF}
    \lstinputlisting[caption=Creazione tabella Chef]{../SQL/Tabelle/Chef.sql}
    La tabella \textbf{Chef} rappresenta gli chef che possono tenere corsi di cucina. Ogni chef ha un identificatore univoco (Username) e le informazioni personali come nome, cognome e password. \\\\\\\\\\\\\\\\\\
    \subsection{Definizione della tabella UTENTE}
    \lstinputlisting[caption=Creazione tabella Utente]{../SQL/Tabelle/Utente.sql}
    La tabella \textbf{Utente} rappresenta gli utenti che possono iscriversi ai corsi di cucina. Ogni utente ha un identificatore univoco (Username) e le informazioni personali come nome, cognome e password. \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
    \subsection{Definizione della tabella CORSO}
    \lstinputlisting[caption=Creazione tabella Corso]{../SQL/Tabelle/Corso.sql}
    La tabella \textbf{Corso} rappresenta i corsi di cucina. Ogni corso ha un identificatore univoco (IdCorso), un titolo, una frequenza, il numero di lezioni, una data di inizio e un riferimento al topic e allo chef che lo insegna. 
    \subsection{Definizione della tabella SESSIONEINPRESENZA}
    \lstinputlisting[caption=Creazione tabella Sessione in Presenza]{../SQL/Tabelle/SessioneInPresenza.sql}
    La tabella \textbf{SessioneInPresenza} rappresenta le sessioni in presenza dei corsi di cucina. Ogni sessione ha un identificatore univoco (IdSessione), un luogo, un'aula, una data, una durata, un numero di sessione e un riferimento al corso a cui appartiene. \\\\
    \subsection{Definizione della tabella SESSIONEONLINE}
    \lstinputlisting[caption=Creazione tabella Sessione Online]{../SQL/Tabelle/SessioneOnline.sql}
    La tabella \textbf{SessioneOnline} rappresenta le sessioni online dei corsi di cucina. Ogni sessione ha un identificatore univoco (IdSessione), un link, una data, una durata, un numero di sessione e un riferimento al corso a cui appartiene. \\\\
    \subsection{Definizione della tabella ADESIONE}
    \lstinputlisting[caption=Creazione tabella Adesione]{../SQL/Tabelle/Adesione.sql}
    La tabella \textbf{Adesione} rappresenta le adesioni degli utenti alle sessioni in presenza dei corsi di cucina. Ogni adesione ha un riferimento all'utente e alla sessione in presenza a cui si riferisce. Questa tabella è necessaria per calcolare il numero di ingredienti necessari per ogni sessione in presenza. \\\\
    \subsection{Definizione della tabella PREPARA}
    \lstinputlisting[caption=Creazione tabella Prepara]{../SQL/Tabelle/Prepara.sql}
    La tabella \textbf{Prepara} rappresenta la relazione tra le sessioni in presenza e le ricette. Ogni record in questa tabella associa una sessione in presenza a una ricetta specifica. \\\\
    \subsection{Definizione della tabella RICETTA}
    \lstinputlisting[caption=Creazione tabella Ricetta]{../SQL/Tabelle/Ricetta.sql}
    La tabella \textbf{Ricetta} rappresenta le ricette associate alle sessioni in presenza dei corsi di cucina. Ogni ricetta ha un identificatore univoco (IdRicetta), un nome e una descrizione. \\\\
    \subsection{Definizione della tabella INGREDIENTE}
    \lstinputlisting[caption=Creazione tabella Ingrediente]{../SQL/Tabelle/Ingrediente.sql}
    La tabella \textbf{Ingrediente} rappresenta gli ingredienti utilizzati nelle ricette. Ogni ingrediente ha un identificatore univoco (IdIngrediente), un nome, un'unità di misura e un flag che indica se è un allergene. 
    \subsection{Definizione della tabella COMPOSIZIONE}
    \lstinputlisting[caption=Creazione tabella Composizione]{../SQL/Tabelle/Composizione.sql}
    La tabella \textbf{Composizione} rappresenta la relazione tra le ricette e gli ingredienti. Ogni record in questa tabella associa una ricetta a varo ingredienti che la compongono, specificando la quantità necessaria per ciascuno di essi.  \\\\\\\\\\\\\\
    \subsection{Definizione della tabella NOTIFICA}
    \lstinputlisting[caption=Creazione tabella Notifica]{../SQL/Tabelle/Notifica.sql}
    La tabella \textbf{Notifica} rappresenta le notifiche inviate dagli chef agli utenti iscritti ai corsi. Ogni notifica ha un identificatore univoco (IdNotifica), una data di invio, un oggetto, un testo e un riferimento allo chef che l'ha inviata. \\\\
    \subsection{Definizione della tabella RICEVE}
    \lstinputlisting[caption=Creazione tabella Riceve]{../SQL/Tabelle/Riceve.sql}
    La tabella \textbf{Riceve} rappresenta la relazione tra le notifiche e gli utenti che le ricevono. Ogni record in questa tabella associa una notifica a un utente specifico, consentendo di tenere traccia delle notifiche inviate a ciascun utente. \\\\\\
    \subsection{Definizione della tabella INSEGNA}
    \lstinputlisting[caption=Creazione tabella Insegna]{../SQL/Tabelle/Insegna.sql}
    La tabella \textbf{Insegna} rappresenta la relazione tra i topic e gli chef che li insegnano. Ogni record in questa tabella associa un topic a uno chef specifico, consentendo di tenere traccia dei topic insegnati da ciascun chef. \\\\\\\\\\\\\\
    \subsection{Definizione della tabella ISCRIZIONE}
    \lstinputlisting[caption=Creazione tabella Iscrizione]{../SQL/Tabelle/Iscrizione.sql}
    La tabella \textbf{Iscrizione} rappresenta le iscrizioni degli utenti ai corsi di cucina. Ogni iscrizione ha un riferimento all'utente e al corso a cui si riferisce, insieme alla data di iscrizione. Questa tabella è necessaria per tenere traccia degli utenti iscritti a ciascun corso e per gestire le notifiche relative ai corsi. \\\\
  
    \section{Triggers, Procedures, Functions e Vincoli}
    Durante la progettazione fisica della base di dati, sono stati implementati alcuni triggers, procedures, functions e vincoli per garantire l'integrità dei dati e automatizzare alcune operazioni. Di seguito sono riportati alcuni esempi:
    \subsection{Funzione per calcolare il numero di adesioni}
    \lstinputlisting[caption=Funzione per calcolare il numero di adesioni]{../SQL/Trigger-Procedures-Functions/CalcoloNumeroAdesioni.sql}
    Questa funzione calcola il numero di adesioni per una sessione in presenza. Necessaria per pianificare correttamente la quantità di ingredienti necessari per ogni sessione in presenza.
    
    \subsection{Trigger per controllare che l'anno del corso sia valido}
    \lstinputlisting[caption=Trigger per controllare l'anno del corso]{../SQL/Trigger-Procedures-Functions/TriggerAnnoCorso.sql}
    Questo trigger viene attivato prima dell'inserimento o aggiornamento di un nuovo corso e verifica che l'anno del corso sia valido. Se l'anno non è valido, il trigger genera un errore e impedisce l'inserimento del corso. Questo è utile per garantire che i corsi siano pianificati correttamente e che le date siano coerenti con l'anno accademico corrente o successivo.\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

    \subsection{Trigger per controllare che l'aula della sessione in presenza non sia occupata}
    \lstinputlisting[caption=Trigger per controllare l'aula della sessione in presenza]{../SQL/Trigger-Procedures-Functions/TriggerAulaOccupata.sql}
    Questo trigger viene attivato prima dell'inserimento o aggiornamento di una sessione in presenza e verifica che l'aula specificata non sia già occupata da un'altra sessione in presenza nello stesso orario. Se l'aula è occupata, il trigger genera un errore e impedisce l'inserimento della sessione. Questo è utile per evitare conflitti di programmazione e garantire che le sessioni in presenza possano essere svolte senza problemi logistici.\\\\\\\\

    \subsection{Trigger per controllare che l'utente che aderisce ad una sessione in presenza sia iscritto al corso}
    \lstinputlisting[caption=Trigger per controllare l'iscrizione dell'utente]{../SQL/Trigger-Procedures-Functions/TriggerControlloAdesioniCorso.sql}
    Questo trigger viene attivato prima dell'inserimento di una nuova adesione e verifica che l'utente che sta aderendo a una sessione in presenza sia iscritto al corso corrispondente. Se l'utente non è iscritto al corso, il trigger genera un errore e impedisce l'inserimento dell'adesione. Questo è utile per garantire che solo gli utenti iscritti ai corsi possano partecipare alle sessioni in presenza, mantenendo la coerenza dei dati e le regole del sistema.\\\\\\\\\\\\\\\\

    \subsection{Trigger per controllare che lo chef insegni il topic del corso che tiene}
    \lstinputlisting[caption=Trigger per controllare il topic del corso]{../SQL/Trigger-Procedures-Functions/TriggerControlloInsegna.sql}
    Questo trigger viene attivato prima dell'inserimento di un nuovo corso e verifica che lo chef che sta insegnando il corso sia effettivamente associato al topic del corso stesso. Se lo chef non insegna il topic specificato, il trigger genera un errore e impedisce l'inserimento del corso. Questo è utile per garantire che i corsi siano tenuti da chef competenti nei rispettivi argomenti, mantenendo la qualità dell'insegnamento.\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
    
    \subsection{Trigger per contollare che le sessioni siano programmate in date successive alla data di inizio del corso}
    \lstinputlisting[caption=Trigger per controllare le date delle sessioni]{../SQL/Trigger-Procedures-Functions/TriggerControlloSessioneCorsoData.sql}
    Questo trigger viene attivato prima dell'inserimento o aggiornamento di una sessione e verifica che la data della sessione sia successiva alla data di inizio del corso a cui appartiene. Se la data della sessione non è valida, il trigger genera un errore e impedisce l'inserimento della sessione. Questo è utile per garantire che le sessioni siano programmate correttamente in relazione al corso, evitando conflitti di programmazione e garantendo che le sessioni si svolgano dopo l'inizio del corso stesso.
    
    \subsection{Trigger per controllare che la data di inizio del corso sia valida}
    \lstinputlisting[caption=Trigger per controllare la data di inizio del corso]{../SQL/Trigger-Procedures-Functions/TriggerDataInizio.sql}
    Questo trigger viene attivato prima dell'inserimento o aggiornamento di un nuovo corso e verifica che la data di inizio del corso sia valida. Se la data non è valida, il trigger genera un errore e impedisce l'inserimento del corso. Questo è utile per garantire che i corsi siano pianificati correttamente e che le date siano coerenti.\\\\\\\\\\\\\\\\

    \subsection{Trigger per controllare che la data delle sessioni sia valida}
    \lstinputlisting[caption=Trigger per controllare la data delle sessioni]{../SQL/Trigger-Procedures-Functions/TriggerDataSessione.sql}
    Questo trigger viene attivato prima dell'inserimento o aggiornamento di una sessione e verifica che la data della sessione sia valida. Se la data non è valida, il trigger genera un errore e impedisce l'inserimento della sessione. Questo è utile per garantire che le sessioni siano programmate correttamente e che le date siano coerenti.

    \subsection{Trigger per controllare che il corso non abbia raggiunto il limite di 50 iscrizioni}
    \lstinputlisting[caption=Trigger per controllare il limite di iscrizioni al corso]{../SQL/Trigger-Procedures-Functions/TriggerLimiteIscrizioni.sql}
    Questo trigger viene attivato prima dell'inserimento di una nuova iscrizione e verifica che il corso a cui l'utente sta cercando di iscriversi non abbia già raggiunto il limite di 50 iscrizioni. Se il limite è stato raggiunto, il trigger genera un errore e impedisce l'inserimento dell'iscrizione. Questo è utile per garantire che i corsi non superino il numero massimo di partecipanti, mantenendo la qualità dell'insegnamento e la gestione delle risorse.

    \subsection{Trigger per controllare che il numero sessione sia coerente con il numero della sessione precedente}
    \lstinputlisting[caption=Trigger per controllare il numero della sessione]{../SQL/Trigger-Procedures-Functions/TriggerNumSessione.sql}
    Questo trigger viene attivato prima dell'inserimento di una sessione e verifica che il numero della sessione sia coerente con il numero della sessione precedente. Se il numero della sessione non è valido, il trigger genera un errore e impedisce l'inserimento della sessione. Questo è utile per garantire che le sessioni siano programmate in modo sequenziale e che non ci siano salti nei numeri delle sessioni, mantenendo la coerenza del sistema.
    
    \subsection{Trigger per controllare che non ci sia una sovrapposizione di date tra le sessioni in presenza per lo stesso chef}
    \lstinputlisting[caption=Trigger per controllare la sovrapposizione di date tra le sessioni in presenza]{../SQL/Trigger-Procedures-Functions/TriggerSovrapposizioniDate.sql}
    Questo trigger viene attivato prima dell'inserimento di una sessione in presenza e verifica che non ci sia una sovrapposizione di date tra le sessioni in presenza per lo stesso chef. Se c'è una sovrapposizione, il trigger genera un errore e impedisce l'inserimento della sessione. Questo è utile per evitare conflitti di programmazione e garantire che gli chef possano gestire le loro sessioni in presenza senza problemi logistici.

    \subsection{Trigger per controllare che gli username degli chef e degli utenti siano univoci}
    \lstinputlisting[caption=Trigger per controllare l'unicità degli username]{../SQL/Trigger-Procedures-Functions/TriggerUsernameUtentiChef.sql}
    Questo trigger viene attivato prima dell'inserimento o aggiornamento di un nuovo chef o utente e verifica che lo username sia univoco. Se lo username è già presente nel database, il trigger genera un errore e impedisce l'inserimento o l'aggiornamento. Questo è utile per garantire che gli username degli chef e degli utenti siano univoci, evitando conflitti e garantendo l'integrità dei dati.
  

    \chapter{Popolamento del database}
    \section{Inserimento dei dati}
    Il database è stato popolato con dati di esempio per testare le funzionalità e verificare il corretto funzionamento delle query. Sono stati inseriti corsi, sessioni, adesioni, ricette e ingredienti, in modo da simulare un ambiente di apprendimento realistico. Di seguito sono riportati alcuni esempi di query utilizzate per il popolamento del database.\\\\
    \subsection{Query di inserimento degli chef}
    \lstinputlisting[caption=Query di inserimento degli chef]{../SQL/Insert/InsertChef.sql}
    Questa query inserisce gli chef nel database, specificando il loro username, nome, cognome e password. Gli chef sono i responsabili dei corsi di cucina.\\\\

    \subsection{Query di inserimento degli utenti}
    \lstinputlisting[caption=Query di inserimento degli utenti]{../SQL/Insert/InsertUtente.sql}
    Questa query inserisce gli utenti nel database, specificando il loro username, nome, cognome e password. Gli utenti sono coloro che si iscrivono ai corsi di cucina.\\\\

    \subsection{Query di inserimento dei corsi}
    \lstinputlisting[caption=Query di inserimento dei corsi]{../SQL/Insert/InsertCorso.sql}
    Questa query inserisce i corsi nel database, specificando il titolo, la frequenza, il numero di lezioni, la data di inizio, il topic e lo chef che insegna il corso. I corsi sono le categorie tematiche dei corsi di cucina.\\\\

    \subsection{Query di inserimento delle sessioni in presenza}
    \lstinputlisting[caption=Query di inserimento delle sessioni in presenza]{../SQL/Insert/InsertSessioneInPresenza.sql}
    Questa query inserisce le sessioni in presenza nel database, specificando il luogo, l'aula, la data, la durata, il numero di sessione e il corso a cui appartiene. Le sessioni in presenza sono le sessioni pratiche dei corsi di cucina.\\\\

    \subsection{Query di inserimento delle sessioni online}
    \lstinputlisting[caption=Query di inserimento delle sessioni online]{../SQL/Insert/InsertSessioneOnline.sql}
    Questa query inserisce le sessioni online nel database, specificando il link, la data, la durata, il numero di sessione e il corso a cui appartiene. Le sessioni online sono le sessioni teoriche dei corsi di cucina.\\\\

    \subsection{Query di inserimento delle adesioni}
    \lstinputlisting[caption=Query di inserimento delle adesioni]{../SQL/Insert/InsertAdesioni.sql}
    Questa query inserisce le adesioni degli utenti alle sessioni in presenza dei corsi di cucina, specificando l'utente e la sessione in presenza a cui si riferiscono.\\\\

    \subsection{Query di inserimento delle ricette}
    \lstinputlisting[caption=Query di inserimento delle ricette]{../SQL/Insert/InsertRicetta.sql}
    Questa query inserisce le ricette nel database, specificando il nome e la descrizione della ricetta. Le ricette sono associate alle sessioni in presenza dei corsi di cucina.\\\\

    \subsection{Query di inserimento degli ingredienti}
    \lstinputlisting[caption=Query di inserimento degli ingredienti]{../SQL/Insert/InsertIngrediente.sql}
    Questa query inserisce gli ingredienti nel database, specificando il nome, l'unità di misura e se è un allergene.\\\\

    \subsection{Query di inserimento della composizione delle ricette}
\begin{lstlisting}[caption=Query di inserimento della composizione delle ricette]
-- Cucina Italiana

-- Spaghetti Aglio Olio e Peperoncino
INSERT INTO Composizione (IdIngrediente, IdRicetta, Quantita)
VALUES
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Spaghetti'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Spaghetti Aglio Olio e Peperoncino'), 100),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Aglio'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Spaghetti Aglio Olio e Peperoncino'), 3),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Olio extravergine d''oliva'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Spaghetti Aglio Olio e Peperoncino'), 40),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Peperoncino'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Spaghetti Aglio Olio e Peperoncino'), 1),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Prezzemolo'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Spaghetti Aglio Olio e Peperoncino'), 10);

-- Pasta e Patate
INSERT INTO Composizione (IdIngrediente, IdRicetta, Quantita)
VALUES
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Rigatoni'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Pasta e Patate'), 80),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Patate'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Pasta e Patate'), 200),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Sedano'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Pasta e Patate'), 50),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Carote'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Pasta e Patate'), 50),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Cipolla bianca'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Pasta e Patate'), 60),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Concentrato di pomodoro'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Pasta e Patate'), 20);

-- Carbonara
INSERT INTO Composizione (IdIngrediente, IdRicetta, Quantita)
VALUES
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Spaghetti'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Carbonara'), 100),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Guanciale'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Carbonara'), 50),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Uova di gallina'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Carbonara'), 2),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Pecorino Romano'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Carbonara'), 40),
    ((SELECT IdIngrediente FROM Ingrediente WHERE Nome = 'Pepe nero'), 
     (SELECT IdRicetta FROM Ricetta WHERE Nome = 'Carbonara'), 2);
\end{lstlisting}
Questa query inserisce la composizione delle ricette nel database, specificando la ricetta, l'ingrediente e la quantità necessaria per ciascuno di essi. Per brevità abbiamo omesso parte del codice, dato che raggiunge 2500 righe.\\\\

    \subsection{Query di inserimento dei topic}
    \lstinputlisting[caption=Query di inserimento dei topic]{../SQL/Insert/InsertTopic.sql}
    Questa query inserisce i topic nel database, specificando il nome e la descrizione del topic. I topic rappresentano le categorie tematiche dei corsi di cucina.\\\\

    \subsection{Query di inserimento della tabella insegna}
    \lstinputlisting[caption=Query di inserimento della tabella insegna]{../SQL/Insert/InsertInsegna.sql}
    Questa query inserisce i record nella tabella \textbf{Insegna}, che rappresenta la relazione tra i topic e gli chef che li insegnano.

    \subsection{Query di inserimento della tabella prepara}
    \lstinputlisting[caption=Query di inserimento della tabella prepara]{../SQL/Insert/InsertPrepara.sql}
    Questa query inserisce i record nella tabella \textbf{Prepara}, che rappresenta la relazione tra le sessioni in presenza e le ricette che vengono preparate durante le sessioni.

    \subsection{Query di inserimento delle iscrizioni}
    \lstinputlisting[caption=Query di inserimento delle iscrizioni]{../SQL/Insert/InsertIscrizione.sql}
    Questa query inserisce le iscrizioni degli utenti ai corsi di cucina, specificando l'utente, il corso e la data di iscrizione.
\end{document}